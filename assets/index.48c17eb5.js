import{j as P,a as U,s as p,l as N,y as D,S as $}from"./vendor.9d525373.js";const V=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function c(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=c(r);fetch(r.href,o)}};V();const i=P,w=U,Z=({lineColor:t,setLineColor:e,resetCanvas:c,stepConway:a,toggleConway:r,setFramerate:o,framerate:n})=>w("div",{className:"Menu",children:[i("label",{children:"Brush Color "}),i("input",{type:"color",value:t,onInput:u=>{e(u.currentTarget.value)}}),i("button",{type:"button",onClick:c,children:"Reset"}),i("button",{type:"button",onClick:a,children:"Step Conway"}),i("button",{type:"button",onClick:r,children:"Toggle Conway"}),w("label",{for:"Framerate",children:["Framerate",i("input",{type:"range",id:"framerate",name:"framerate",min:"1",max:"121",step:"15",value:n,onInput:u=>{o(u.currentTarget.valueAsNumber)}})]}),i("pre",{style:{minWidth:"3ch"},children:n})]}),l=75,M="#ffffff";function q(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:{r:0,g:0,b:0}}function E(t){var e=t.toString(16);return e.length==1?"0"+e:e}function G(t){const e=t.map(q),c=(n,u)=>n+u,a=Math.floor(e.map(n=>n==null?void 0:n.r).reduce(c)/t.length),r=Math.floor(e.map(n=>n==null?void 0:n.g).reduce(c)/t.length),o=Math.floor(e.map(n=>n==null?void 0:n.b).reduce(c)/t.length);return"#"+E(a)+E(r)+E(o)}function R(t){return!!t&&t!==M}function H(t,e,c){const a=[e-l-1,e-l,e-l+1,e-1,e+1,e+l-1,e+l,e+l+1].map(o=>c[o]),r=a.filter(R).length;return r===3?R(t)?t:G(a.filter(R)):r===2&&R(t)?t:M}const d=10;function J(){const t=p(!1),[e,c]=N(new Array(l*l).fill(M)),a=p(null),r=p(null),o=p(!1),n=p("#000000"),[u,X]=N(1),F=s=>n.current=s,S=p(u),x=p(void 0);D(()=>{S.current=u,t.current&&(clearTimeout(x.current),v())},[u]);const v=()=>{c(s=>s.map(H)),t.current&&(x.current=setTimeout(v,Math.floor(1e3*1/S.current)))},O=()=>{t.current=!t.current,t.current?v():clearTimeout(x.current)},Y=s=>{if(s.button==0){const f=s.currentTarget,{clientX:m,clientY:h}=s,{x:I,y:L}=f.getClientRects()[0],[T,A]=[m-I,h-L].map(g=>Math.floor(g/d)),C=T+A*l;c(g=>g.map((y,b)=>b<=C&&C<b+1?n.current:y)),o.current=!0}},k=s=>{s.button==0&&(o.current=!1)},B=s=>{const f=r.current;if(!o.current||f==null)return;const m=s.currentTarget,{clientX:h,clientY:I}=s,{x:L,y:T}=m.getClientRects()[0],[A,C]=[h-L,I-T].map(y=>Math.floor(y/d)),g=A+C*l;c(y=>y.map((b,j)=>j<=g&&g<j+1?n.current:b))};return D(()=>{const s=a.current;if(s!=null){const f=s.getContext("2d");f.clearRect(0,0,s.width,s.height),f.lineCap="round",f.lineJoin="round",r.current=f;for(const[m,h]of e.entries())f.fillStyle=h,f.fillRect(m%l*d,Math.floor(m/l)*d,d,d)}},[e,n.current]),console.log(e.join("").length),w("div",{className:"App",children:[i("h1",{children:"Live Conway's painting"}),w("div",{className:"draw-area",children:[i(Z,{lineColor:n.current,setLineColor:F,resetCanvas:()=>{c(s=>s.map(()=>M)),t.current=!1},stepConway:v,toggleConway:O,framerate:u,setFramerate:X}),i("canvas",{style:{outline:"1px red solid"},onMouseDown:Y,onMouseMove:B,onMouseUp:k,ref:a,width:l*d,height:l*d})]})]})}$(i(J,{}),document.getElementById("app"));
