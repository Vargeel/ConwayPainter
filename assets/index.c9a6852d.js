import{j as $,a as V,s as d,l as N,y as D,S as Z}from"./vendor.9d525373.js";const q=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function c(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(r){if(r.ep)return;r.ep=!0;const o=c(r);fetch(r.href,o)}};q();const i=$,w=V,G=({lineColor:t,setLineColor:e,resetCanvas:c,stepConway:l,toggleConway:r,setFramerate:o,framerate:n})=>w("div",{className:"Menu",children:[i("label",{children:"Brush Color "}),i("input",{type:"color",value:t,onInput:u=>{e(u.currentTarget.value)}}),i("button",{type:"button",onClick:c,children:"Reset"}),i("button",{type:"button",onClick:l,children:"Step Conway"}),i("button",{type:"button",onClick:r,children:"Toggle Conway"}),w("label",{for:"Framerate",children:["Framerate",i("input",{type:"range",id:"framerate",name:"framerate",min:"1",max:"121",step:"15",value:n,onInput:u=>{o(u.currentTarget.valueAsNumber)}})]}),i("pre",{style:{minWidth:"3ch"},children:n})]}),a=75,b="#ffffff";function H(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:{r:0,g:0,b:0}}function E(t){var e=t.toString(16);return e.length==1?"0"+e:e}function J(t){const e=t.map(H),c=(n,u)=>n+u,l=Math.floor(e.map(n=>n==null?void 0:n.r).reduce(c)/t.length),r=Math.floor(e.map(n=>n==null?void 0:n.g).reduce(c)/t.length),o=Math.floor(e.map(n=>n==null?void 0:n.b).reduce(c)/t.length);return"#"+E(l)+E(r)+E(o)}function M(t){return!!t&&t!==b}function X(t,e,c){const l=[e-a-1,e-a,e-a+1,e-1,e+1,e+a-1,e+a,e+a+1].map(o=>c[o]),r=l.filter(M).length;return r===3?M(t)?t:J(l.filter(M)):r===2&&M(t)?t:b}const p=10;function K(){const t=d(!1),[e,c]=N(new Array(a*a).fill(b)),l=d(null),r=d(null),o=d(!1),n=d("#000000"),[u,F]=N(1),O=s=>n.current=s,S=d(u),R=d(void 0);D(()=>{S.current=u,t.current&&(clearTimeout(R.current),x())},[u]);const Y=()=>{c(s=>s.map(X))},x=()=>{c(s=>s.map(X)),t.current&&(R.current=setTimeout(x,Math.floor(1e3*1/S.current)))},k=()=>{t.current=!t.current,t.current?x():clearTimeout(R.current)},B=s=>{if(s.button==0){const f=s.currentTarget,{clientX:m,clientY:h}=s,{x:I,y:L}=f.getClientRects()[0],[T,A]=[m-I,h-L].map(g=>Math.floor(g/p)),v=T+A*a;c(g=>g.map((y,C)=>C<=v&&v<C+1?n.current:y)),o.current=!0}},P=s=>{s.button==0&&(o.current=!1)},U=s=>{const f=r.current;if(!o.current||f==null)return;const m=s.currentTarget,{clientX:h,clientY:I}=s,{x:L,y:T}=m.getClientRects()[0],[A,v]=[h-L,I-T].map(y=>Math.floor(y/p)),g=A+v*a;c(y=>y.map((C,j)=>j<=g&&g<j+1?n.current:C))};return D(()=>{const s=l.current;if(s!=null){const f=s.getContext("2d");f.clearRect(0,0,s.width,s.height),f.lineCap="round",f.lineJoin="round",r.current=f;for(const[m,h]of e.entries())f.fillStyle=h,f.fillRect(m%a*p,Math.floor(m/a)*p,p,p)}},[e,n.current]),console.log(e.join("").length),w("div",{className:"App",children:[i("h1",{children:"Live Conway's painting"}),w("div",{className:"draw-area",children:[i(G,{lineColor:n.current,setLineColor:O,resetCanvas:()=>{c(s=>s.map(()=>b)),t.current=!1},stepConway:Y,toggleConway:k,framerate:u,setFramerate:F}),i("canvas",{style:{outline:"1px red solid"},onMouseDown:B,onMouseMove:U,onMouseUp:P,ref:l,width:a*p,height:a*p})]})]})}Z(i(K,{}),document.getElementById("app"));
