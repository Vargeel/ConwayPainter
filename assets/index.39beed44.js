import{j as P,a as U,s as p,l as j,y as x,S as B}from"./vendor.9d525373.js";const V=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function l(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(e){if(e.ep)return;e.ep=!0;const r=l(e);fetch(e.href,r)}};V();const a=P,b=U,Z=({lineColor:t,setLineColor:n,resetCanvas:l,stepConway:c,toggleConway:e,setFramerate:r,framerate:i})=>b("div",{className:"Menu",children:[a("label",{children:"Brush Color "}),a("input",{type:"color",value:t,onInput:f=>{n(f.currentTarget.value)}}),a("button",{type:"button",onClick:l,children:"Reset"}),a("button",{type:"button",onClick:c,children:"Step Conway"}),a("button",{type:"button",onClick:e,children:"Toggle Conway"}),b("label",{for:"Framerate",children:["Framerate",a("input",{type:"range",id:"framerate",name:"framerate",min:"1",max:"121",step:"15",value:i,onInput:f=>{r(f.currentTarget.valueAsNumber)}})]}),a("pre",{style:{minWidth:"3ch"},children:i})]}),s=75,M="#ffffff";function $(t){const n=t.map(c=>Number.parseInt(c.slice(1),16)).reduce((c,e)=>c+e,0),l=Math.floor(n/t.length);return"#"+l.toString(16).padStart(6,"0")}function R(t){return!!t&&t!==M}function q(t,n,l){const c=[n-s-1,n-s,n-s+1,n-1,n+1,n+s-1,n+s,n+s+1].map(r=>l[r]),e=c.filter(R).length;return e===3?R(t)?t:$(c.filter(R)):e===2&&R(t)?t:M}const d=10;function J(){const t=p(!1),[n,l]=j(new Array(s*s).fill(M)),c=p(null),e=p(null),r=p(!1),i=p("#000000"),[f,D]=j(1),X=o=>i.current=o,I=p(f),L=p(void 0);x(()=>{I.current=f,t.current&&(clearTimeout(L.current),v())},[f]);const v=()=>{l(o=>o.map(q)),t.current&&(L.current=setTimeout(v,Math.floor(1e3*1/I.current)))},F=()=>{t.current=!t.current,t.current?v():clearTimeout(L.current)},O=o=>{if(o.button==0){const u=o.currentTarget,{clientX:m,clientY:g}=o,{x:A,y:N}=u.getClientRects()[0],[S,E]=[m-A,g-N].map(h=>Math.floor(h/d)),C=S+E*s;l(h=>h.map((y,w)=>w<=C&&C<w+1?i.current:y)),r.current=!0}},Y=o=>{o.button==0&&(r.current=!1)},k=o=>{const u=e.current;if(!r.current||u==null)return;const m=o.currentTarget,{clientX:g,clientY:A}=o,{x:N,y:S}=m.getClientRects()[0],[E,C]=[g-N,A-S].map(y=>Math.floor(y/d)),h=E+C*s;l(y=>y.map((w,T)=>T<=h&&h<T+1?i.current:w))};return x(()=>{const o=c.current;if(o!=null){const u=o.getContext("2d");u.clearRect(0,0,o.width,o.height),u.lineCap="round",u.lineJoin="round",e.current=u;for(const[m,g]of n.entries())u.fillStyle=g,u.fillRect(m%s*d,Math.floor(m/s)*d,d,d)}},[n,i.current]),console.log(n.join("").length),b("div",{className:"App",children:[a("h1",{children:"Live Conway's painting"}),b("div",{className:"draw-area",children:[a(Z,{lineColor:i.current,setLineColor:X,resetCanvas:()=>{l(o=>o.map(()=>M)),t.current=!1},stepConway:v,toggleConway:F,framerate:f,setFramerate:D}),a("canvas",{style:{outline:"1px red solid"},onMouseDown:O,onMouseMove:k,onMouseUp:Y,ref:c,width:s*d,height:s*d})]})]})}B(a(J,{}),document.getElementById("app"));
